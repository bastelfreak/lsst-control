---
classes:
  - "mate"
  - "profile::core::anaconda"
  - "profile::core::common"
  - "profile::core::debugutils"
  - "profile::core::docker"
  - "profile::core::docker::prune"
  - "profile::core::ni_packages"
  - "profile::core::x2go"
  - "profile::ts::hexrot"
  - "profile::ts::nexusctio"
files:
  /rubin:
    ensure: "directory"
    recurse: true
    owner: 73006  # saluser
    group: 73006
    mode: "0775"
    subscribe:
      - "Package[runHexEui]"
      - "Package[runRotEui]"
      - "Package[runM2Cntlr]"

# / on hexrot.cp was formated with xfs fstype=0 (long, long, long ago) and is
# not compatible with overlayfs[2]
profile::core::docker::storage_driver: "devicemapper"
accounts::group_list:
  # this is duplicating the ipa gid as a local group
  &docker_name docker-%{facts.hostname}:
    ensure: "present"
    gid: 70014
    forcelocal: true
profile::core::anaconda::python_env_name: "py311"
profile::core::anaconda::python_env_version: "3.11"
profile::core::anaconda::conda_packages:
  -
    name: "pyside2"
    channel: "conda-forge"
  -
    name: "ts-m2gui"
    channel: "lsstts"
